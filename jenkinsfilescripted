#!/usr/bin/env groovy

node {
    //define environment variables

    withEnv(ENV_VAR= 'I am environment variable'){
        echo "setting variable"
    }
    stage('checkout'){
        checkout scm
    }
    
    stage('Build'){
        echo "compiling build number: ${env.BUILD_ID}"
        echo "${env.ENV_VAR}"
        archiveArtifacts artifacts: '*.md', fingerprint: true
    }

    stage('Test'){
        echo "testing on native"
        echo "publishing the unit tests"
    }

    stage('Deploy'){
        if (currentBuild.result == null || currentBuild.result == 'SUCCESS' ){
            echo "deploying artifacts to repository"
        }
        
    }

}